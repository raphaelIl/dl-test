{% extends "base.html" %}

{% block title %}{{ _('동영상 다운로더 - YouTube, TikTok, Instagram 무료 다운로드') }}{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index_styles.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="language-dropzone">
            <div class="lang-btn" id="languageToggle">
                <i class="fas fa-globe"></i>
                {{ languages[current_lang] }}
                <i class="fas fa-caret-down" style="margin-left: 5px;"></i>
            </div>
            <div class="language-drawer" id="languageDrawer">
                <div class="language-options" id="languageOptions">
                    {% for code, name in languages.items() %}
                        <a href="/{{ code }}{{ request.path[3:] if request.path|length > 3 else '/' }}"
                           class="language-option {% if current_lang == code %}active{% endif %}"
                           data-lang-code="{{ code }}">
                            <span class="language-flag">{{ code }}</span>
                            {{ name }}
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="logo">
            <i class="fas fa-download"></i>
        </div>
        <h1>{{ _('동영상 다운로더') }}</h1>

        <div class="description">
            {{ _('YouTube, Instagram, TikTok, Facebook, Twitter(X) 등 다양한 플랫폼에서 동영상을 다운로드 할 수 있습니다. 원하는 사이트에서 동영상 URL을 복사하여 붙여넣기만 하면 최고 화질로 다운로드 됩니다.') }}
        </div>

        <form method="post" action="{{ url_for('index', lang=current_lang) }}">
            <div class="form-group">
                <label for="video_url">{{ _('동영상 URL') }}</label>
                <input type="text" id="video_url" name="video_url" placeholder="{{ _('동영상 URL을 입력하세요') }}"
                       value="{{ video_url }}" required>
            </div>
            <button type="submit"><i class="fas fa-cloud-download-alt"></i> {{ _('다운로드') }}</button>
        </form>
        {% if error %}
            <div class="error">
                <i class="fas fa-exclamation-circle"></i> {{ error }}
            </div>
        {% endif %}

        <div class="benefits-section">
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <div class="benefit-title">{{ _('빠른 다운로드') }}</div>
                <p>{{ _('최적화된 서버로 빠른 다운로드 속도를 제공합니다.') }}</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="benefit-title">{{ _('안전한 사용') }}</div>
                <p>{{ _('광고 없이 안전하게 이용할 수 있습니다.') }}</p>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">
                    <i class="fas fa-award"></i>
                </div>
                <div class="benefit-title">{{ _('최고 화질') }}</div>
                <p>{{ _('가능한 최고 화질로 동영상을 다운로드합니다.') }}</p>
            </div>
        </div>

        <div class="site-title">{{ _('지원되는 사이트') }}</div>
        <div class="supported-sites">
            <a href="https://www.youtube.com" target="_blank" rel="noopener">
                <i class="fab fa-youtube site-icon"></i>
            </a>
            <a href="https://www.instagram.com" target="_blank" rel="noopener">
                <i class="fab fa-instagram site-icon"></i>
            </a>
            <a href="https://www.tiktok.com" target="_blank" rel="noopener">
                <i class="fab fa-tiktok site-icon"></i>
            </a>
            <a href="https://www.facebook.com" target="_blank" rel="noopener">
                <i class="fab fa-facebook site-icon"></i>
            </a>
            <a href="https://twitter.com" target="_blank" rel="noopener">
                <i class="fab fa-twitter site-icon"></i>
            </a>
        </div>

        <div class="how-to-section">
            <h3>{{ _('사용 방법') }}</h3>
            <div class="step-cards">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <div class="step-icon"><i class="fas fa-link"></i></div>
                    <p>{{ _('원하는 동영상의 URL을 복사하세요') }}</p>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <div class="step-icon"><i class="fas fa-paste"></i></div>
                    <p>{{ _('URL을 입력란에 붙여넣기하세요') }}</p>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <div class="step-icon"><i class="fas fa-download"></i></div>
                    <p>{{ _('다운로드 버튼을 클릭하세요') }}</p>
                </div>
            </div>
        </div>

        <div class="mt-4">
            <h3>{{ _('자주 묻는 질문') }}</h3>
            <div class="faq-section">
                <div class="faq-question">
                    {{ _('어떤 사이트를 지원하나요?') }}
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer" style="display: none;">
                    {{ _('YouTube, Instagram, TikTok, Facebook, Twitter(X) 등의 주요 동영상 사이트를 지원합니다.') }}
                </div>

                <div class="faq-question">
                    {{ _('다운로드 속도가 느린 이유는 무엇인가요?') }}
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer" style="display: none;">
                    {{ _('다운로드 속도는 서버 트래픽, 인터넷 연결 속도, 파일 크기에 따라 달라질 수 있습니다.') }}
                </div>

                <div class="faq-question">
                    {{ _('사용료는 얼마인가요?') }}
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer" style="display: none;">
                    {{ _('모든 기능을 무료로 이용할 수 있습니다.') }}
                </div>
            </div>
        </div>

        <div class="footer">
            {{ _('안전하고 빠른 비디오 다운로드 서비스') }}
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Language dropdown functionality
            const languageToggle = document.getElementById('languageToggle');
            const languageDrawer = document.getElementById('languageDrawer');

            if (languageToggle && languageDrawer) {
                languageToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    languageDrawer.classList.toggle('open');
                });

                document.addEventListener('click', function(e) {
                    if (languageDrawer.classList.contains('open') &&
                        !languageDrawer.contains(e.target) &&
                        e.target !== languageToggle) {
                        languageDrawer.classList.remove('open');
                    }
                });
            }

            // FAQ section toggle
            const faqQuestions = document.querySelectorAll('.faq-question');

            faqQuestions.forEach(question => {
                question.addEventListener('click', function() {
                    const answer = this.nextElementSibling;
                    const isOpen = answer.style.display === 'block';

                    // Close all answers
                    document.querySelectorAll('.faq-answer').forEach(ans => {
                        ans.style.display = 'none';
                    });

                    document.querySelectorAll('.faq-question i').forEach(icon => {
                        icon.className = 'fas fa-chevron-down';
                    });

                    // Open this answer if it was closed
                    if (!isOpen) {
                        answer.style.display = 'block';
                        this.querySelector('i').className = 'fas fa-chevron-up';
                    }
                });
            });
        });
    </script>
{% endblock %}
